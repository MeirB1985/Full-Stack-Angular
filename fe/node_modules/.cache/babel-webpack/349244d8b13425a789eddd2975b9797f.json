{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/Desktop/FullStack/JB/Third Project/fe/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from 'src/environments/environment';\nimport store from 'src/app/redux/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/carts.service\";\nimport * as i3 from \"src/app/services/products.service\";\nimport * as i4 from \"src/app/services/items.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\n\nfunction ItemCardComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"result\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ItemCardComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ItemCardComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.deleteItem();\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class ItemCardComponent {\n  constructor(myActivatedRoute, myCartsService, myProductsService, myItemsService) {\n    this.myActivatedRoute = myActivatedRoute;\n    this.myCartsService = myCartsService;\n    this.myProductsService = myProductsService;\n    this.myItemsService = myItemsService;\n    this.imageUrl = environment.itemImagesUrl;\n    this.highLight = false;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.user = store.getState().authState.user;\n\n      try {\n        _this.products = yield _this.myProductsService.getAllProducts();\n      } catch (err) {\n        console.log(\"err user products\");\n      }\n\n      try {\n        _this.carts = yield _this.myCartsService.getAllCarts(_this.user._id);\n      } catch (err) {\n        console.log(\"err getting user carts\");\n      }\n\n      _this.lastCartIndex = _this.carts.length - 1;\n\n      if (_this.carts[_this.lastCartIndex] === null) {\n        console.log(\"new cart\");\n      } else {\n        try {\n          _this.items = yield _this.myItemsService.getAllItems(_this.carts[_this.lastCartIndex]._id);\n        } catch (err) {\n          console.log(\"err getting user items\");\n        }\n      }\n\n      console.log(_this.items);\n\n      if (_this.result !== undefined) {\n        for (let i of _this.result) {\n          if (i === _this.item) {\n            _this.highLight = true;\n          }\n        }\n      }\n\n      if (_this.myActivatedRoute.snapshot.routeConfig.path === \"orders/new\") {\n        _this.isCartPage = false;\n      } else {\n        _this.isCartPage = true;\n      }\n\n      return _this.isCartPage;\n    })();\n  }\n\n  deleteItem() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.myItemsService.deleteItem(_this2.item._id);\n      } catch (err) {\n        console.log(err);\n      }\n    })();\n  }\n\n}\n\nItemCardComponent.ɵfac = function ItemCardComponent_Factory(t) {\n  return new (t || ItemCardComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CartsService), i0.ɵɵdirectiveInject(i3.ProductsService), i0.ɵɵdirectiveInject(i4.ItemsService));\n};\n\nItemCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ItemCardComponent,\n  selectors: [[\"app-item-card\"]],\n  inputs: {\n    item: \"item\",\n    result: \"result\"\n  },\n  decls: 7,\n  vars: 6,\n  consts: [[1, \"main\"], [\"mat-raised-button\", \"\", 1, \"imageDiv\"], [3, \"src\"], [\"mat-raised-button\", \"\", 1, \"detailsDiv\"], [4, \"ngIf\"], [\"mat-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", 3, \"click\"]],\n  template: function ItemCardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵtemplate(5, ItemCardComponent_span_5_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, ItemCardComponent_button_6_Template, 3, 0, \"button\", 5);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"src\", ctx.imageUrl + ctx.item.products[0].imageName, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate3(\" Name: \", ctx.item.products[0].name, \", Quantity: \", ctx.item.quantity, \", Price: \", ctx.item.price, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.highLight);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isCartPage);\n    }\n  },\n  directives: [i5.NgIf, i6.MatButton, i7.MatIcon],\n  styles: [\".main[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    display: inline;\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    text-align: left;\\r\\n    margin: 10px;\\r\\n}\\r\\n\\r\\n.imageDiv[_ngcontent-%COMP%] {\\r\\n    width: 30%;\\r\\n}\\r\\n\\r\\n.detailsDiv[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\nimg[_ngcontent-%COMP%] {\\r\\n    width: 40px;\\r\\n    height: 40px;\\r\\n}\\r\\n\\r\\n.mat-icon[_ngcontent-%COMP%] {\\r\\n    height: 20px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZW0tY2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLGVBQWU7SUFDZixhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLGdCQUFnQjtJQUNoQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksVUFBVTtBQUNkOztBQUVBO0lBQ0ksV0FBVztBQUNmOztBQUVBO0lBQ0ksV0FBVztJQUNYLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCIiwiZmlsZSI6Iml0ZW0tY2FyZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW4ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbn1cclxuXHJcbi5pbWFnZURpdiB7XHJcbiAgICB3aWR0aDogMzAlO1xyXG59XHJcblxyXG4uZGV0YWlsc0RpdiB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuaW1nIHtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG59XHJcblxyXG4ubWF0LWljb24ge1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG59Il19 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\FullStack\\JB\\Third Project\\fe\\src\\app\\components\\items-area\\item-card\\item-card.component.ts","C:\\Users\\user\\Desktop\\FullStack\\JB\\Third Project\\fe\\src\\app\\components\\items-area\\item-card\\item-card.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport ItemModel from 'src/app/models/item.model';\nimport CartModel from 'src/app/models/cart.model';\nimport UserModel from 'src/app/models/user.model';\nimport ProductModel from 'src/app/models/product.model';\nimport { ItemsService } from 'src/app/services/items.service';\nimport { ProductsService } from 'src/app/services/products.service';\nimport { CartsService } from 'src/app/services/carts.service';\nimport { environment } from 'src/environments/environment';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport store from 'src/app/redux/store';\n\n@Component({\n  selector: 'app-item-card',\n  templateUrl: './item-card.component.html',\n  styleUrls: ['./item-card.component.css']\n})\n\nexport class ItemCardComponent {\n\n  @Input()\n  public item: ItemModel;\n\n  @Input()\n  public result: ItemModel[];\n  \n  private carts: CartModel[];\n  public products: ProductModel[];\n  public user: UserModel;\n  public items: ItemModel[];\n  private lastCartIndex: number;\n  public imageUrl = environment.itemImagesUrl;\n  public isCartPage: boolean;\n  public highLight: boolean = false;\n\n  constructor(\n    private myActivatedRoute: ActivatedRoute,\n    private myCartsService: CartsService,\n    private myProductsService: ProductsService,\n    private myItemsService: ItemsService\n  ) { }\n\n  async ngOnInit() {\n    this.user = store.getState().authState.user;\n    try {\n      this.products = await this.myProductsService.getAllProducts();\n    }\n    catch (err) {\n      console.log(\"err user products\");\n    }\n    try {\n      this.carts = await this.myCartsService.getAllCarts(this.user._id);\n    }\n    catch (err) {\n      console.log(\"err getting user carts\");\n    }\n    this.lastCartIndex = this.carts.length - 1;\n    if (this.carts[this.lastCartIndex] === null) {\n      console.log(\"new cart\");\n    } else {\n      try {\n        this.items = await this.myItemsService.getAllItems(this.carts[this.lastCartIndex]._id);\n      }\n      catch (err) {\n        console.log(\"err getting user items\");\n      }\n    }\n    console.log(this.items);\n\n    if (this.result !== undefined) {\n      for (let i of this.result) {\n        if (i === this.item) {\n          this.highLight = true;\n        }\n      }\n    }\n    if (this.myActivatedRoute.snapshot.routeConfig.path === \"orders/new\") {\n      this.isCartPage = false;\n    } else {\n      this.isCartPage = true;\n    }\n    return this.isCartPage;\n  }\n  \n\n  async deleteItem() {\n    try {\n      await this.myItemsService.deleteItem(this.item._id);\n    }\n    catch(err) {\n        console.log(err);\n    }\n  }\n}","<div class=\"main\">\n    <div mat-raised-button class=\"imageDiv\">\n    <img [src]=\"imageUrl + item.products[0].imageName\"/>\n    </div>\n    <div mat-raised-button class=\"detailsDiv\">\n    Name: {{item.products[0].name}}, Quantity: {{item.quantity}}, Price: {{item.price}}\n    <span *ngIf=\"highLight\">result</span>\n    </div>\n    <button *ngIf=\"isCartPage\" mat-button (click)=\"deleteItem()\">\n        <mat-icon>delete</mat-icon>\n    </button>\n    \n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}