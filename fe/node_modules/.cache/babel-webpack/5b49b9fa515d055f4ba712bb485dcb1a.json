{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/Desktop/FullStack/JB/ThirdProject/fe/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport store from 'src/app/redux/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/carts.service\";\nimport * as i2 from \"src/app/services/orders.service\";\nimport * as i3 from \"src/app/services/notify.service\";\nimport * as i4 from \"@angular/material/dialog\";\nexport class DialogComponent {\n  // public fileName: Blob;\n  constructor(myCartsService, myOrdersService, // private sanitizer: DomSanitizer,\n  notify, dialogRef, data) {\n    this.myCartsService = myCartsService;\n    this.myOrdersService = myOrdersService;\n    this.notify = notify;\n    this.dialogRef = dialogRef;\n    this.data = data;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // this.unsubscribeMe = store.subscribe(async () => {\n      _this.user = store.getState().authState.user;\n\n      try {\n        _this.carts = yield _this.myCartsService.getAllCarts(_this.user._id);\n      } catch (err) {\n        console.log(\"err getting user carts\");\n      }\n\n      _this.lastCartIndex = _this.carts.length - 1;\n\n      try {\n        _this.orders = yield _this.myOrdersService.getAllUserOrders(_this.user._id);\n      } catch (err) {\n        console.log(\"err getting user carts\");\n      }\n\n      _this.lastOrderIndex = _this.orders.length - 1;\n      _this.orderId = _this.orders[_this.lastOrderIndex]._id; // });\n      // \"'http://127.0.0.1:8887'\"\n      // const blob = new Blob([\"'http://127.0.0.1:8887/'\" + this.orderId + \".txt\"], { type: 'application/octet-stream' });\n      // const blob = new Blob([\"'C:/Users/user/Desktop/FullStack/JB/Third Project/be/database/orders/'\" + this.orderId + \".txt\"], { type: 'application/octet-stream' });\n\n      _this.fileUrl = \"C:/Users/user/Desktop/FullStack/JB/Third Project/be/database/orders/\"; // this.fileUrl =  \"http://localhost:3030/api\";\n      // ThirdProject\\be\\database\\orders\n      // C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\be\\database\\orders/\n    })();\n  } // ngOnDestroy(): void {\n  //     this.unsubscribeMe();\n  // }\n\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n\n}\n\nDialogComponent.ɵfac = function DialogComponent_Factory(t) {\n  return new (t || DialogComponent)(i0.ɵɵdirectiveInject(i1.CartsService), i0.ɵɵdirectiveInject(i2.OrdersService), i0.ɵɵdirectiveInject(i3.NotifyService), i0.ɵɵdirectiveInject(i4.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\n\nDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DialogComponent,\n  selectors: [[\"app-dialog\"]],\n  decls: 11,\n  vars: 2,\n  consts: [[1, \"main\"], [\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-stroked-button\", \"\", 3, \"href\"], [\"mat-stroked-button\", \"\", \"routerLinkActive\", \"active\", 3, \"href\"]],\n  template: function DialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵelementStart(3, \"h3\");\n      i0.ɵɵtext(4, \"Your order was completed\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 2);\n      i0.ɵɵelement(6, \"a\", 3);\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelementStart(9, \"a\", 4);\n      i0.ɵɵtext(10, \"Finish\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"href\", ctx.fileUrl + ctx.orderId, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"href\", \"http://localhost:4200/home\", i0.ɵɵsanitizeUrl);\n    }\n  },\n  styles: [\".main[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    text-align: center;\\r\\n    width: 400px;\\r\\n    height: 200px;\\r\\n    border: 1px solid black;\\r\\n    \\r\\n    \\r\\n    border-radius: 10px;\\r\\n    background-color: rgb(125, 171, 255);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kscUJBQXFCO0lBQ3JCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixxQkFBcUI7SUFDckIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQixvQ0FBb0M7QUFDeEMiLCJmaWxlIjoiZGlhbG9nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogNDAwcHg7XHJcbiAgICBoZWlnaHQ6IDIwMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICAvKiBwYWRkaW5nOiAwIDEwcHg7ICovXHJcbiAgICAvKiBtYXJnaW46IDEwcHg7ICovXHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEyNSwgMTcxLCAyNTUpO1xyXG59Il19 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\fe\\src\\app\\components\\order-area\\dialog\\dialog.component.ts","C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\fe\\src\\app\\components\\order-area\\dialog\\dialog.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Unsubscribe } from 'redux';\nimport CartModel from 'src/app/models/cart.model';\nimport ItemModel from 'src/app/models/item.model';\nimport UserModel from 'src/app/models/user.model';\nimport store from 'src/app/redux/store';\nimport { CartsService } from 'src/app/services/carts.service';\nimport { NotifyService } from 'src/app/services/notify.service';\nimport { OrdersService } from 'src/app/services/orders.service';\nimport OrderModel from 'src/app/models/order.model';\n// import { DomSanitizer } from '@angular/platform-browser';\n\nexport interface DialogData {\n}\n\n@Component({\n  selector: 'app-dialog',\n  templateUrl: './dialog.component.html',\n  styleUrls: ['./dialog.component.css']\n})\nexport class DialogComponent {\n\n  public items: ItemModel[];\n  private unsubscribeMe: Unsubscribe;\n  private carts: CartModel[];\n  public order: OrderModel;\n  public orders: OrderModel[];\n  public user: UserModel;\n  public orderId: string;\n  private lastCartIndex: number;\n  private lastOrderIndex: number;\n  public fileUrl: string;\n  // public fileName: Blob;\n\n  constructor(\n    private myCartsService: CartsService,\n    private myOrdersService: OrdersService,\n    // private sanitizer: DomSanitizer,\n    private notify: NotifyService,\n\n    public dialogRef: MatDialogRef<DialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData,\n  ) {}\n\n  async ngOnInit() {\n    // this.unsubscribeMe = store.subscribe(async () => {\n      this.user = store.getState().authState.user;\n      try {\n        this.carts = await this.myCartsService.getAllCarts(this.user._id);\n      }\n      catch (err) {\n        console.log(\"err getting user carts\");\n      }\n      this.lastCartIndex = this.carts.length - 1;\n      try {\n      this.orders = await this.myOrdersService.getAllUserOrders(this.user._id);\n      }\n      catch (err) {\n        console.log(\"err getting user carts\");\n      }\n      this.lastOrderIndex = this.orders.length - 1;\n      this.orderId = this.orders[this.lastOrderIndex]._id;\n    // });\n    // \"'http://127.0.0.1:8887'\"\n    // const blob = new Blob([\"'http://127.0.0.1:8887/'\" + this.orderId + \".txt\"], { type: 'application/octet-stream' });\n    // const blob = new Blob([\"'C:/Users/user/Desktop/FullStack/JB/Third Project/be/database/orders/'\" + this.orderId + \".txt\"], { type: 'application/octet-stream' });\n    this.fileUrl = \"C:/Users/user/Desktop/FullStack/JB/Third Project/be/database/orders/\";\n    // this.fileUrl =  \"http://localhost:3030/api\";\n    // ThirdProject\\be\\database\\orders\n    // C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\be\\database\\orders/\n  }\n\n  // ngOnDestroy(): void {\n  //     this.unsubscribeMe();\n  // }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n  // async getYourReceipt() {\n  //   // console.log(this.user._id + \"can remove\");\n  //   this.user = store.getState().authState.user;\n  //   try {\n  //     this.orders = await this.myOrdersService.getAllUserOrders(this.user._id);\n  //   }\n  //   catch (err) {\n  //       console.log(\"err getting user carts\");\n  //   }\n  //   this.lastOrderIndex = this.orders.length - 1;\n  //   console.log(this.orders[this.lastOrderIndex]._id);\n  //   try {\n  //     const receipt = await this.myOrdersService.getReceipt(this.orders[this.lastOrderIndex]._id);\n  //     console.log(receipt);\n  //   }\n  //   catch (err) {\n  //       console.log(\"err getting user orders\");\n  //   }\n  // }\n}\n","<div class=\"main\">\n    <div mat-dialog-content>\n        <div >\n            <h3>Your order was completed</h3>\n        </div>\n    </div>\n    <div mat-dialog-actions>\n        <!-- <a mat-stroked-button [href]=\"fileUrl\" download=\"{{orderId}}.txt\">Click here to get your receipt</a> -->\n        <!-- <a mat-stroked-button [href]=\"fileUrl\" download=\"Order61ae518794a556489721238e.txt\">Click here to get your receipt</a> -->\n        <a mat-stroked-button [href]=\"fileUrl + orderId\"></a>\n        <br/>\n        <br/>\n        <a mat-stroked-button [href]=\"'http://localhost:4200/home'\" routerLinkActive=\"active\">Finish</a>\n    </div>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}