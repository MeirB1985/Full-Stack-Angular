{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/Desktop/FullStack/JB/Third Project/fe/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport ProductModel from 'src/app/models/product.model';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/products.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/category.service\";\nimport * as i4 from \"src/app/services/notify.service\";\nexport class AdminComponent {\n  constructor(myProductsService, myActivatedRoute, myCategoriesService, notify, myRouter) {\n    this.myProductsService = myProductsService;\n    this.myActivatedRoute = myActivatedRoute;\n    this.myCategoriesService = myCategoriesService;\n    this.notify = notify;\n    this.myRouter = myRouter;\n    this.product = new ProductModel();\n    this.imageUrl = environment.productImagesUrl;\n    this.nameControl = new FormControl(null, [Validators.required, Validators.pattern(\"^[A-Z].*$\")]);\n    this.priceControl = new FormControl(null, Validators.required);\n    this.categoryControl = new FormControl(null, Validators.required);\n    this.imageControl = new FormControl();\n    this.productForm = new FormGroup({\n      nameControl: this.nameControl,\n      priceControl: this.priceControl,\n      categoryControl: this.categoryControl,\n      imageControl: this.imageControl\n    });\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // this.unsubscribeMe = store.subscribe(async() => {\n      //   this.user = store.getState().authState.user;\n      //   console.log(this.user);\n      try {\n        _this.products = yield _this.myProductsService.getAllProducts();\n      } catch (err) {\n        console.log(\"cant get products\");\n      }\n\n      try {\n        _this.categories = yield _this.myCategoriesService.getAllCategories();\n      } catch (err) {\n        console.log(\"cant get categories\");\n      } // });\n\n    })();\n  } // ngOnDestroy(): void {\n  //   this.unsubscribeMe();\n  // }\n\n\n  saveImage(args) {\n    this.product.image = args.target.files;\n  }\n\n  getThisProduct(p) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.nameControl.setValue(p.name);\n\n      _this2.priceControl.setValue(p.price);\n\n      _this2.categoryControl.setValue(p.category);\n\n      _this2.myRouter.navigateByUrl(\"/admin/\" + p._id);\n    })();\n  }\n\n  edit() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const id = _this3.myActivatedRoute.snapshot.params.id;\n        _this3.product._id = id;\n        _this3.product.name = _this3.nameControl.value;\n        _this3.product.price = _this3.priceControl.value;\n\n        for (_this3.category of _this3.categories) {\n          _this3.product.categoryToSend === _this3.categoryControl.value;\n        } // this.product.categoryToSend = this.category._id;\n\n\n        console.log(_this3.product.categoryToSend);\n        yield _this3.myProductsService.editProduct(_this3.product);\n\n        _this3.notify.success(\"Product has been updated.\");\n      } catch (err) {\n        console.log(\"problem editing product\");\n      }\n    })();\n  }\n\n}\n\nAdminComponent.ɵfac = function AdminComponent_Factory(t) {\n  return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.ProductsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i4.NotifyService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdminComponent,\n  selectors: [[\"app-admin\"]],\n  decls: 0,\n  vars: 0,\n  template: function AdminComponent_Template(rf, ctx) {},\n  styles: [\".adminPage[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    padding: 0 10px;\\r\\n    margin: 10px;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    width: 55%;\\r\\n    float: right;\\r\\n    padding: 5px;\\r\\n    margin: 5px;\\r\\n}\\r\\n\\r\\n.cards[_ngcontent-%COMP%] {\\r\\n\\twidth: 100px;\\r\\n    height: 100px;\\r\\n    display: inline-block;\\r\\n    text-align: left;\\r\\n    align-items: center;\\r\\n    padding: 0 10px;\\r\\n    margin: 10px;\\r\\n}\\r\\n\\r\\nimg[_ngcontent-%COMP%] {\\r\\n    width: 60px;\\r\\n    height: 60px;\\r\\n    margin: 5px;\\r\\n}\\r\\n\\r\\n.links[_ngcontent-%COMP%] {\\r\\n    height: 20px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\na[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    text-align: center;\\r\\n    left: 20px;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\nform[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%] {\\r\\n    width: 300px;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n    width: 50%;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.example-container[_ngcontent-%COMP%] {\\r\\n    width: 500px;\\r\\n    height: 300px;\\r\\n    border: 1px solid rgba(0, 0, 0, 0.5);\\r\\n}\\r\\n\\r\\n.example-sidenav-content[_ngcontent-%COMP%] {\\r\\ndisplay: flex;\\r\\nheight: 100%;\\r\\nalign-items: center;\\r\\njustify-content: center;\\r\\n}\\r\\n\\r\\n.example-sidenav[_ngcontent-%COMP%] {\\r\\npadding: 20px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxxQkFBcUI7SUFDckIsZUFBZTtJQUNmLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLFlBQVk7SUFDWixZQUFZO0lBQ1osV0FBVztBQUNmOztBQUNBO0NBQ0MsWUFBWTtJQUNULGFBQWE7SUFDYixxQkFBcUI7SUFDckIsZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQixlQUFlO0lBQ2YsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osV0FBVztBQUNmOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTs7R0FFRzs7QUFFSDtJQUNJLGtCQUFrQjtJQUNsQixrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLGtCQUFrQjtBQUN0Qjs7QUFFQTs7OztHQUlHOztBQUVIO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixrQkFBa0I7QUFDdEI7O0FBRUE7Ozs7O0dBS0c7O0FBRUg7SUFDSSxZQUFZO0lBQ1osYUFBYTtJQUNiLG9DQUFvQztBQUN4Qzs7QUFFQTtBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1osbUJBQW1CO0FBQ25CLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBLGFBQWE7QUFDYiIsImZpbGUiOiJhZG1pbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFkbWluUGFnZSB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBwYWRkaW5nOiAwIDEwcHg7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbn1cclxuXHJcbi5wcm9kdWN0cyB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogNTUlO1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLmNhcmRzIHtcclxuXHR3aWR0aDogMTAwcHg7XHJcbiAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAwIDEwcHg7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbn1cclxuXHJcbmltZyB7XHJcbiAgICB3aWR0aDogNjBweDtcclxuICAgIGhlaWdodDogNjBweDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcblxyXG4ubGlua3Mge1xyXG4gICAgaGVpZ2h0OiAyMHB4O1xyXG59XHJcblxyXG4vKiAubWFpbiB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG59ICovXHJcblxyXG5hIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGxlZnQ6IDIwcHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi8qIGZvcm0ge1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxufSAqL1xyXG5cclxuZm9ybSwgbWF0LWZvcm0tZmllbGQge1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLyogaW5wdXQsIGxhYmVsLCBzZWxlY3QsIG9wdGlvbiB7XHJcblx0d2lkdGg6IDEwMCU7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgZm9udC1zaXplOiB4LWxhcmdlO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxufSAqL1xyXG5cclxuLmV4YW1wbGUtY29udGFpbmVyIHtcclxuICAgIHdpZHRoOiA1MDBweDtcclxuICAgIGhlaWdodDogMzAwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNSk7XHJcbn1cclxuXHJcbi5leGFtcGxlLXNpZGVuYXYtY29udGVudCB7XHJcbmRpc3BsYXk6IGZsZXg7XHJcbmhlaWdodDogMTAwJTtcclxuYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuanVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbi5leGFtcGxlLXNpZGVuYXYge1xyXG5wYWRkaW5nOiAyMHB4O1xyXG59Il19 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\FullStack\\JB\\Third Project\\fe\\src\\app\\components\\admin-area\\admin\\admin.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport ProductModel from 'src/app/models/product.model';\nimport { NotifyService } from 'src/app/services/notify.service';\nimport { CategoryService } from 'src/app/services/category.service';\nimport CategoryModel from 'src/app/models/category.model';\nimport UserModel from 'src/app/models/user.model';\nimport { Unsubscribe } from 'redux';\nimport store from 'src/app/redux/store';\nimport { ProductsService } from 'src/app/services/products.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent implements OnInit {\n\n  public products: ProductModel[];\n  public product = new ProductModel();\n  public categories: CategoryModel[];\n  public category: CategoryModel;\n  public user: UserModel;\n  private unsubscribeMe: Unsubscribe;\n  public imageUrl = environment.productImagesUrl;\n\n  // FormGroup is an object representing the <form> element: \n  public productForm: FormGroup;\n\n  // FormControl is an object representing an <input>/<select>/<textarea> element:\n  public nameControl: FormControl;\n  public priceControl: FormControl;\n  public categoryControl: FormControl;\n  public imageControl: FormControl;\n\n  constructor(\n    private myProductsService: ProductsService,\n    private myActivatedRoute: ActivatedRoute,\n    private myCategoriesService: CategoryService,\n    private notify: NotifyService,\n    private myRouter: Router) {\n\n      this.nameControl = new FormControl(null, [Validators.required, Validators.pattern(\"^[A-Z].*$\")]);\n      this.priceControl = new FormControl(null, Validators.required);\n      this.categoryControl = new FormControl(null, Validators.required);\n      this.imageControl = new FormControl();\n      this.productForm = new FormGroup({\n          nameControl: this.nameControl,\n          priceControl: this.priceControl,\n          categoryControl: this.categoryControl,\n          imageControl: this.imageControl\n      });\n    }\n\n  async ngOnInit() {\n    // this.unsubscribeMe = store.subscribe(async() => {\n    //   this.user = store.getState().authState.user;\n    //   console.log(this.user);\n    try {\n      this.products = await this.myProductsService.getAllProducts();\n    }\n    catch (err) {\n      console.log(\"cant get products\");\n    }\n    try {\n      this.categories = await this.myCategoriesService.getAllCategories();\n    }\n    catch (err) {\n      console.log(\"cant get categories\");\n    }\n    // });\n  }\n\n  // ngOnDestroy(): void {\n  //   this.unsubscribeMe();\n  // }\n\n  public saveImage(args: Event): void {\n    this.product.image = (args.target as HTMLInputElement).files;\n  }\n\n  public async getThisProduct(p: ProductModel) {\n    this.nameControl.setValue(p.name);\n    this.priceControl.setValue(p.price);\n    this.categoryControl.setValue(p.category);\n    this.myRouter.navigateByUrl(\"/admin/\"+ p._id);\n  }\n\n  public async edit() {\n    try {\n      const id = this.myActivatedRoute.snapshot.params.id;\n      this.product._id = id;\n      this.product.name = this.nameControl.value;\n      this.product.price = this.priceControl.value;\n      for (this.category of this.categories) {\n        this.product.categoryToSend === this.categoryControl.value;\n      }\n      // this.product.categoryToSend = this.category._id;\n      console.log(this.product.categoryToSend);\n      await this.myProductsService.editProduct(this.product);\n      this.notify.success(\"Product has been updated.\");\n    }\n    catch(err) {\n        console.log(\"problem editing product\");\n    }\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}