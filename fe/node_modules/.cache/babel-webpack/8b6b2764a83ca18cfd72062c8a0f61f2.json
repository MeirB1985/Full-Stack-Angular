{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/Desktop/FullStack/JB/ThirdProject/fe/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport store from 'src/app/redux/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/carts.service\";\nimport * as i2 from \"src/app/services/orders.service\";\nimport * as i3 from \"@angular/material/dialog\";\nexport class DialogComponent {\n  constructor(myCartsService, myOrdersService, dialogRef, data) {\n    this.myCartsService = myCartsService;\n    this.myOrdersService = myOrdersService;\n    this.dialogRef = dialogRef;\n    this.data = data;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.user = store.getState().authState.user;\n\n      try {\n        _this.carts = yield _this.myCartsService.getAllCarts(_this.user._id);\n      } catch (err) {\n        console.log(\"err getting user carts\");\n      }\n\n      _this.lastCartIndex = _this.carts.length - 1;\n\n      try {\n        _this.orders = yield _this.myOrdersService.getAllUserOrders(_this.user._id);\n      } catch (err) {\n        console.log(\"err getting user carts\");\n      }\n\n      _this.lastOrderIndex = _this.orders.length - 1;\n      _this.orderId = _this.orders[_this.lastOrderIndex]._id;\n      _this.fileUrl = \"http://localhost:3030/api/orders/database/orders/\";\n      _this.fileName = _this.orderId + \".txt\";\n    })();\n  }\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n\n}\n\nDialogComponent.ɵfac = function DialogComponent_Factory(t) {\n  return new (t || DialogComponent)(i0.ɵɵdirectiveInject(i1.CartsService), i0.ɵɵdirectiveInject(i2.OrdersService), i0.ɵɵdirectiveInject(i3.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\n\nDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DialogComponent,\n  selectors: [[\"app-dialog\"]],\n  decls: 11,\n  vars: 3,\n  consts: [[1, \"main\"], [\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-stroked-button\", \"\", 3, \"href\", \"download\"], [\"mat-stroked-button\", \"\", \"routerLinkActive\", \"active\", 3, \"href\"]],\n  template: function DialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"h3\");\n      i0.ɵɵtext(3, \"Your order was completed\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵelementStart(5, \"a\", 3);\n      i0.ɵɵtext(6, \"Click here to get your receipt\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelementStart(9, \"a\", 4);\n      i0.ɵɵtext(10, \"Finish\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵpropertyInterpolate(\"download\", ctx.fileName);\n      i0.ɵɵproperty(\"href\", ctx.fileUrl, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"href\", \"http://localhost:4200/home\", i0.ɵɵsanitizeUrl);\n    }\n  },\n  styles: [\".main[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    text-align: center;\\r\\n    width: 400px;\\r\\n    height: 200px;\\r\\n    border: 1px solid black;\\r\\n    \\r\\n    \\r\\n    border-radius: 10px;\\r\\n    background-color: rgb(125, 171, 255);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kscUJBQXFCO0lBQ3JCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixxQkFBcUI7SUFDckIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQixvQ0FBb0M7QUFDeEMiLCJmaWxlIjoiZGlhbG9nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbiB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogNDAwcHg7XHJcbiAgICBoZWlnaHQ6IDIwMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICAvKiBwYWRkaW5nOiAwIDEwcHg7ICovXHJcbiAgICAvKiBtYXJnaW46IDEwcHg7ICovXHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEyNSwgMTcxLCAyNTUpO1xyXG59Il19 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\fe\\src\\app\\components\\order-area\\dialog\\dialog.component.ts","C:\\Users\\user\\Desktop\\FullStack\\JB\\ThirdProject\\fe\\src\\app\\components\\order-area\\dialog\\dialog.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport CartModel from 'src/app/models/cart.model';\nimport ItemModel from 'src/app/models/item.model';\nimport UserModel from 'src/app/models/user.model';\nimport store from 'src/app/redux/store';\nimport { CartsService } from 'src/app/services/carts.service';\nimport { NotifyService } from 'src/app/services/notify.service';\nimport { OrdersService } from 'src/app/services/orders.service';\nimport OrderModel from 'src/app/models/order.model';\n\nexport interface DialogData {\n}\n\n@Component({\n  selector: 'app-dialog',\n  templateUrl: './dialog.component.html',\n  styleUrls: ['./dialog.component.css']\n})\nexport class DialogComponent {\n\n  public items: ItemModel[];\n  private carts: CartModel[];\n  public order: OrderModel;\n  public orders: OrderModel[];\n  public user: UserModel;\n  public orderId: string;\n  private lastCartIndex: number;\n  private lastOrderIndex: number;\n  public fileUrl: string;\n  public fileName: string;\n\n  constructor(\n    private myCartsService: CartsService,\n    private myOrdersService: OrdersService,\n\n    public dialogRef: MatDialogRef<DialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData,\n  ) {}\n\n  async ngOnInit() {\n    this.user = store.getState().authState.user;\n    try {\n      this.carts = await this.myCartsService.getAllCarts(this.user._id);\n    }\n    catch (err) {\n      console.log(\"err getting user carts\");\n    }\n    this.lastCartIndex = this.carts.length - 1;\n    try {\n    this.orders = await this.myOrdersService.getAllUserOrders(this.user._id);\n    }\n    catch (err) {\n      console.log(\"err getting user carts\");\n    }\n    this.lastOrderIndex = this.orders.length - 1;\n    this.orderId = this.orders[this.lastOrderIndex]._id;\n    this.fileUrl = \"http://localhost:3030/api/orders/database/orders/\";\n    this.fileName = this.orderId + \".txt\";\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n}\n","<div class=\"main\">\n    <div mat-dialog-content>\n        <h3>Your order was completed</h3>\n    </div>\n    <div mat-dialog-actions>\n        <a mat-stroked-button [href]=\"fileUrl\" download=\"{{fileName}}\">Click here to get your receipt</a>\n        <br/>\n        <br/>\n        <a mat-stroked-button [href]=\"'http://localhost:4200/home'\" routerLinkActive=\"active\">Finish</a>\n    </div>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}